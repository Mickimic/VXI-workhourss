<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>瑞克和莫蒂的工时宇宙</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'rick-blue': '#00FFFF',
                        'rick-green': '#39FF14',
                        'rick-pink': '#FF6EC7',
                        'rick-yellow': '#F9F002',
                        'space-black': '#0B0E13',
                        'space-gray': '#1A1F29',
                        'space-light': '#2D3748'
                    },
                    fontFamily: {
                        'rick': ['"Get Schwifty"', 'sans-serif', 'Arial'],
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'spin-slow': 'spin 15s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 5px rgba(0, 255, 255, 0.5), 0 0 10px rgba(0, 255, 255, 0.3)' },
                            '100%': { boxShadow: '0 0 10px rgba(0, 255, 255, 0.8), 0 0 20px rgba(0, 255, 255, 0.5), 0 0 30px rgba(0, 255, 255, 0.3)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow-rick {
                text-shadow: 0 0 5px rgba(0, 255, 255, 0.7), 0 0 10px rgba(0, 255, 255, 0.5);
            }
            .text-shadow-green {
                text-shadow: 0 0 5px rgba(57, 255, 20, 0.7), 0 0 10px rgba(57, 255, 20, 0.5);
            }
            .text-shadow-pink {
                text-shadow: 0 0 5px rgba(255, 110, 199, 0.7), 0 0 10px rgba(255, 110, 199, 0.5);
            }
            .bg-grid {
                background-image: 
                    linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
                background-size: 20px 20px;
            }
            .glow-border {
                box-shadow: 0 0 5px rgba(0, 255, 255, 0.5), 0 0 10px rgba(0, 255, 255, 0.3);
            }
            .glow-border-green {
                box-shadow: 0 0 5px rgba(57, 255, 20, 0.5), 0 0 10px rgba(57, 255, 20, 0.3);
            }
            .glow-border-pink {
                box-shadow: 0 0 5px rgba(255, 110, 199, 0.5), 0 0 10px rgba(255, 110, 199, 0.3);
            }
        }
    </style>
    
    <style>
        /* 基础样式 */
        body {
            background-color: #0B0E13;
            color: #ffffff;
            overflow-x: hidden;
        }
        
        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1A1F29;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #00FFFF;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #39FF14;
        }
        
        /* 字体加载 */
        @font-face {
            font-family: 'Get Schwifty';
            src: url('https://fonts.cdnfonts.com/css/get-schwifty') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        
        /* 动画效果 */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        
        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* 角色弹窗背景模糊效果 */
        .modal-backdrop {
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        /* 表格单元格动画 */
        .table-cell {
            transition: all 0.3s ease;
        }
        
        /* 搜索框动画 */
        .search-input:focus {
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.8), 0 0 20px rgba(0, 255, 255, 0.5);
        }
    </style>
</head>
<body class="bg-space-black bg-grid min-h-screen">
    <!-- 星星背景动画 -->
    <div id="stars" class="fixed inset-0 pointer-events-none z-0"></div>

    <!-- 顶部导航 -->
    <header class="relative z-10 border-b border-rick-blue/30 bg-space-black/80 backdrop-blur-sm sticky top-0">
        <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center mb-4 md:mb-0">
                <div class="w-10 h-10 rounded-full bg-rick-blue/20 animate-pulse-slow mr-3 flex items-center justify-center">
                    <i class="fa fa-clock-o text-rick-blue text-xl"></i>
                </div>
                <h1 class="text-2xl md:text-3xl font-rick text-rick-blue text-shadow-rick">
                    瑞克的工时宇宙
                </h1>
            </div>
            
            <div class="flex items-center space-x-4">
                <div class="relative hidden md:block">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                        <i class="fa fa-search text-rick-blue/70"></i>
                    </span>
                    <input type="text" id="globalSearch" placeholder="在全宇宙搜索..." 
                           class="bg-space-gray border border-rick-blue/30 rounded-full py-2 pl-10 pr-4 text-sm focus:outline-none focus:border-rick-blue transition-all w-48 lg:w-64 text-white">
                </div>
                
                <button class="bg-space-gray hover:bg-space-light border border-rick-green/50 text-rick-green py-2 px-4 rounded-full text-sm transition-all hover:glow-border-green flex items-center">
                    <i class="fa fa-refresh mr-2"></i> 重置
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 relative z-10">
        <!-- 页面标题和简介 -->
        <section class="mb-12 animate-on-scroll">
            <div class="text-center max-w-3xl mx-auto">
                <h2 class="text-[clamp(1.8rem,5vw,3rem)] font-rick text-rick-green text-shadow-green mb-4">
                    员工工时查询系统 3000
                </h2>
                <p class="text-gray-300 text-lg mb-6">
                    别管什么次元了，先看看你的工时达不达标吧！这个宇宙的标准可是168小时/月，别让瑞克失望。
                </p>
                
                <!-- 移动端搜索框 -->
                <div class="relative md:hidden mb-6">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                        <i class="fa fa-search text-rick-blue/70"></i>
                    </span>
                    <input type="text" id="mobileSearch" placeholder="搜索员工..." 
                           class="bg-space-gray border border-rick-blue/30 rounded-full py-2 pl-10 pr-4 text-sm focus:outline-none focus:border-rick-blue transition-all w-full text-white">
                </div>
            </div>
        </section>

        <!-- 数据概览和图表 -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12">
            <!-- 统计卡片 -->
            <div class="lg:col-span-1 space-y-6">
                <div class="bg-space-gray rounded-xl p-6 border border-rick-blue/20 animate-on-scroll glow-border hover:scale-[1.02] transition-transform">
                    <h3 class="text-rick-blue text-xl mb-4 flex items-center">
                        <i class="fa fa-users mr-2"></i> 员工总数
                    </h3>
                    <p class="text-4xl font-bold text-white" id="totalEmployees">0</p>
                </div>
                
                <div class="bg-space-gray rounded-xl p-6 border border-rick-green/20 animate-on-scroll glow-border-green hover:scale-[1.02] transition-transform" style="animation-delay: 0.2s">
                    <h3 class="text-rick-green text-xl mb-4 flex items-center">
                        <i class="fa fa-check-circle mr-2"></i> 工时达标
                    </h3>
                    <p class="text-4xl font-bold text-white" id="达标员工数">0</p>
                </div>
                
                <div class="bg-space-gray rounded-xl p-6 border border-rick-pink/20 animate-on-scroll glow-border-pink hover:scale-[1.02] transition-transform" style="animation-delay: 0.4s">
                    <h3 class="text-rick-pink text-xl mb-4 flex items-center">
                        <i class="fa fa-exclamation-triangle mr-2"></i> 工时异常
                    </h3>
                    <p class="text-4xl font-bold text-white" id="异常员工数">0</p>
                </div>
            </div>
            
            <!-- 图表 -->
            <div class="lg:col-span-2 bg-space-gray rounded-xl p-6 border border-rick-blue/20 animate-on-scroll">
                <h3 class="text-rick-blue text-xl mb-6 flex items-center">
                    <i class="fa fa-bar-chart mr-2"></i> 工时分布统计
                </h3>
                <div class="h-80">
                    <canvas id="workHoursChart"></canvas>
                </div>
            </div>
        </section>

        <!-- 员工工时表格 -->
        <section class="mb-16 animate-on-scroll">
            <div class="bg-space-gray rounded-xl overflow-hidden border border-rick-blue/20">
                <div class="p-6 border-b border-rick-blue/20">
                    <h3 class="text-rick-blue text-xl flex items-center">
                        <i class="fa fa-table mr-2"></i> 员工工时数据
                    </h3>
                    <p class="text-gray-400 mt-1">点击员工姓名查看详情和评价</p>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="bg-space-light">
                                <th class="py-4 px-6 text-left text-rick-green">员工姓名</th>
                                <th class="py-4 px-6 text-left text-rick-green">8月1日</th>
                                <th class="py-4 px-6 text-left text-rick-green">8/4-8/8</th>
                                <th class="py-4 px-6 text-left text-rick-green">8/11-8/15</th>
                                <th class="py-4 px-6 text-left text-rick-green">8/18-8/22</th>
                                <th class="py-4 px-6 text-left text-rick-green">8/25-8/29</th>
                                <th class="py-4 px-6 text-left text-rick-green">总计</th>
                                <th class="py-4 px-6 text-left text-rick-green">状态</th>
                            </tr>
                        </thead>
                        <tbody id="employeesTableBody">
                            <!-- 表格内容将通过JavaScript动态生成 -->
                            <tr>
                                <td colspan="8" class="py-8 text-center text-gray-400">
                                    <div class="flex flex-col items-center">
                                        <div class="w-16 h-16 border-4 border-dashed border-rick-blue/30 rounded-full animate-spin-slow mb-4"></div>
                                        加载员工数据中...
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-space-gray border-t border-rick-blue/30 py-6 relative z-10">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400 text-sm">
                瑞克的工时宇宙 &copy; 2025 | 别试图理解它，只管使用它就好
            </p>
            <p class="text-rick-blue/70 text-xs mt-2">
                注意：这个系统可能会在任何时候跳转到其他次元
            </p>
        </div>
    </footer>

    <!-- 角色弹窗 -->
    <div id="characterModal" class="fixed inset-0 z-50 hidden modal-backdrop">
        <div class="absolute inset-0 flex items-center justify-center p-4">
            <div class="bg-space-black border-2 border-rick-blue rounded-xl max-w-3xl w-full max-h-[90vh] overflow-hidden animate-glow">
                <div class="relative">
                    <!-- 角色图片 -->
                    <div class="h-64 md:h-80 bg-space-gray">
                        <img id="characterImage" src="" alt="" class="w-full h-full object-cover">
                    </div>
                    
                    <!-- 关闭按钮 -->
                    <button id="closeModal" class="absolute top-4 right-4 w-10 h-10 rounded-full bg-space-black/80 flex items-center justify-center text-white hover:text-rick-blue transition-colors z-10">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="p-6">
                    <h3 id="characterName" class="text-2xl font-rick text-rick-blue text-shadow-rick mb-4"></h3>
                    <div class="flex items-center mb-6">
                        <span id="employeeName" class="text-xl font-bold text-white"></span>
                        <span id="totalHoursDisplay" class="ml-4 px-3 py-1 rounded-full text-sm"></span>
                    </div>
                    <p id="characterQuote" class="text-gray-300 text-lg leading-relaxed"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
  // 员工数据
const employees = [
    {name: "罗子皓", hours: [8, 45, 47, 40, 40], total: 180},
    {name: "刘心奕", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "余颖", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "裴文华", hours: [8, 32, 46, 40, 40], total: 166},
    {name: "苏捷", hours: [8, 40, 54, 40, 40], total: 182},
    {name: "祝皓雯", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "陈锶蕙", hours: [2, 46, 56, 40, 40], total: 184},
    {name: "易杨平", hours: [8, 40, 56, 40, 40], total: 184},
    {name: "黎佳丽", hours: [0, 24, 41, 40, 40], total: 145},
    {name: "李金璇", hours: [8, 40, 56, 40, 40], total: 184},
    {name: "曾子荣", hours: [0, 40, 40, 40, 40], total: 160},
    {name: "钟栋竞", hours: [8, 40, 48, 40, 40], total: 176},
    {name: "游丽萍", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "陈佳鑫", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "庞芝婷", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "谢璇", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "庄泽楠", hours: [8, 9, 0, 32, 40], total: 89},
    {name: "何江萍", hours: [8, 40, 56, 40, 40], total: 184},
    {name: "郭天艳", hours: [8, 40, 40, 35, 40], total: 163},
    {name: "曾睿璠", hours: [8, 40, 56, 40, 40], total: 184},
    {name: "周双", hours: [8, 37, 40, 32, 40], total: 157},
    {name: "田静", hours: [8, 32, 55, 40, 40], total: 175},
    {name: "李琳", hours: [0, 40, 40, 40, 40], total: 160},
    {name: "巫尚贤", hours: [8, 37, 32, 40, 40], total: 157},
    {name: "苏诗画", hours: [8, 40, 32, 40, 40], total: 160},
    {name: "初华旭", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "陈洁", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "张丫丫", hours: [8, 42, 8, 24, 40], total: 122},
    {name: "涂逸", hours: [8, 43, 41, 40, 40], total: 172},
    {name: "李洁怡", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "李凯盈", hours: [8, 37, 41, 40, 40], total: 166},
    {name: "张秀莲", hours: [8, 0, 0, 0, 0], total: 8},
    {name: "高刘香", hours: [8, 40, 48, 40, 40], total: 176},
    {name: "周子涵", hours: [8, 43, 41, 40, 40], total: 172},
    {name: "张梦", hours: [8, 40, 48, 40, 40], total: 176},
    {name: "康篡娇", hours: [8, 40, 56, 40, 40], total: 184},
    {name: "刘涛", hours: [8, 40, 56, 40, 40], total: 184},
    {name: "丁童昕", hours: [8, 0, 0, 0, 0], total: 8},
    {name: "何丽雅", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "尚兴越", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "施铖钰", hours: [8, 40, 48, 40, 40], total: 176},
    {name: "陈蔚", hours: [0, 40, 16, 40, 40], total: 136},
    {name: "苏琪", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "缪月", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "胡洛晨", hours: [8, 8, 40, 40, 40], total: 136},
    {name: "李坤", hours: [8, 40, 40, 0, 0], total: 88},
    {name: "黄诗淇", hours: [8, 40, 40, 0, 0], total: 88},
    {name: "罗佳兰", hours: [8, 40, 48, 40, 40], total: 176},
    {name: "钟玉", hours: [8, 31, 0, 0, 0], total: 39},
    {name: "章云燕", hours: [8, 40, 56, 40, 40], total: 184},
    {name: "毛姚钰子", hours: [8, 40, 56, 40, 40], total: 184},
    {name: "方含雨", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "简行峰", hours: [8, 40, 48, 40, 40], total: 176},
    {name: "柯均", hours: [8, 40, 48, 40, 40], total: 176},
    {name: "胡杰婷", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "冶思杨", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "徐晓琪", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "董世杰", hours: [8, 40, 40, 40, 40], total: 168},
    {name: "王天美", hours: [0, 0, 0, 40, 40], total: 80},
    {name: "张根遥", hours: [0, 0, 0, 40, 40], total: 80},
    {name: "高欣悦", hours: [0, 0, 0, 40, 40], total: 80},
    {name: "龙建宇", hours: [0, 0, 0, 40, 40], total: 80},
    {name: "杨巧巧", hours: [0, 0, 0, 40, 40], total: 80}
];
        // DOM元素
        const employeesTableBody = document.getElementById('employeesTableBody');
        const characterModal = document.getElementById('characterModal');
        const closeModal = document.getElementById('closeModal');
        const characterImage = document.getElementById('characterImage');
        const characterName = document.getElementById('characterName');
        const characterQuote = document.getElementById('characterQuote');
        const employeeName = document.getElementById('employeeName');
        const totalHoursDisplay = document.getElementById('totalHoursDisplay');
        const totalEmployeesEl = document.getElementById('totalEmployees');
        const 达标员工数El = document.getElementById('达标员工数');
        const 异常员工数El = document.getElementById('异常员工数');
        const globalSearch = document.getElementById('globalSearch');
        const mobileSearch = document.getElementById('mobileSearch');

        // 初始化星星背景
        function initStars() {
            const stars = document.getElementById('stars');
            const count = 150;
            
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                const size = Math.random() * 3;
                
                star.style.position = 'absolute';
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.backgroundColor = i % 5 === 0 ? '#00FFFF' : i % 7 === 0 ? '#39FF14' : 'white';
                star.style.borderRadius = '50%';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.opacity = Math.random();
                star.style.animation = `pulse ${3 + Math.random() * 7}s infinite`;
                star.style.animationDelay = `${Math.random() * 5}s`;
                
                stars.appendChild(star);
            }
        }

        // 渲染员工表格
        function renderEmployees(employeesList = employees) {
            employeesTableBody.innerHTML = '';
            
            if (employeesList.length === 0) {
                employeesTableBody.innerHTML = `
                    <tr>
                        <td colspan="8" class="py-8 text-center text-gray-400">
                            <div class="flex flex-col items-center">
                                <i class="fa fa-search-minus text-4xl text-rick-pink mb-4"></i>
                                没有找到匹配的员工
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            employeesList.forEach((employee, index) => {
                const row = document.createElement('tr');
                row.className = index % 2 === 0 ? 'bg-space-black' : 'bg-space-gray/50';
                row.classList.add('hover:bg-space-light/50', 'transition-colors');
                
                // 确定工时状态
                let statusClass = '';
                let statusText = '';
                
                if (employee.total < 168) {
                    statusClass = 'text-red-400 bg-red-900/20';
                    statusText = '工时不足';
                } else if (employee.total === 168) {
                    statusClass = 'text-rick-green bg-green-900/20';
                    statusText = '工时正常';
                } else {
                    statusClass = 'text-rick-pink bg-pink-900/20';
                    statusText = '已加班';
                }
                
                // 构建表格行内容
                row.innerHTML = `
                    <td class="py-4 px-6 font-medium">
                        <button class="employee-detail text-rick-blue hover:text-rick-green transition-colors flex items-center" 
                                data-name="${employee.name}" 
                                data-total="${employee.total}">
                            ${employee.name}
                            <i class="fa fa-arrow-right ml-2 text-xs"></i>
                        </button>
                    </td>
                    ${employee.hours.map(hour => `
                        <td class="py-4 px-6 table-cell ${getHourClass(hour)}">
                            ${hour}
                        </td>
                    `).join('')}
                    <td class="py-4 px-6 font-bold ${employee.total < 168 ? 'text-red-400' : employee.total > 168 ? 'text-rick-pink' : 'text-rick-green'}">
                        ${employee.total}
                    </td>
                    <td class="py-4 px-6">
                        <span class="px-3 py-1 rounded-full text-xs font-medium ${statusClass}">
                            ${statusText}
                        </span>
                    </td>
                `;
                
                employeesTableBody.appendChild(row);
            });
            
            // 添加员工详情点击事件
            document.querySelectorAll('.employee-detail').forEach(button => {
                button.addEventListener('click', () => {
                    const name = button.getAttribute('data-name');
                    const total = parseInt(button.getAttribute('data-total'));
                    showCharacterModal(name, total);
                });
            });
        }

        // 根据工时获取样式类
        function getHourClass(hour) {
            if (hour === 0) return 'text-gray-500';
            if (hour < 30) return 'text-red-400';
            if (hour > 40) return 'text-rick-pink';
            return '';
        }

        // 显示角色弹窗
        function showCharacterModal(employeeNameText, totalHours) {
            let character = {};
            
            // 根据工时选择角色
            if (totalHours < 168) {
                // Rick - 工时不足
                character = {
                    name: "瑞克·桑切斯",
                    image: "rick-warning.jpg", // 示例图片，实际应替换为Rick图片
                    quote: `嘿，${employeeNameText}！你的工时才${totalHours}小时？这简直是宇宙级别的笑话！赶紧把工时补足到168小时，否则我就把你送到C-137次元去做苦工！别跟我废话，快去工作！`
                };
                totalHoursDisplay.className = 'bg-red-900/30 text-red-400';
            } else if (totalHours === 168) {
                // Jerry - 工时正常
                character = {
                    name: "杰瑞·史密斯",
                    image: "Jerry_Smith.jpg", // 示例图片，实际应替换为Jerry图片
                    quote: `哦，嗨，${employeeNameText}... 你的工时刚好168小时... 挺好的... 其实我觉得吧，人生的意义不在于工作多少，而在于... 嗯... 躺平？对，躺平就好... 别太努力，会累着自己的...`
                };
                totalHoursDisplay.className = 'bg-rick-green/20 text-rick-green';
            } else {
                // Morty - 工时超标
                character = {
                    name: "莫蒂·史密斯",
                    image: "Morty.jpg", // 示例图片，实际应替换为Morty图片
                    quote: `哇哦，${employeeNameText}，你已经工作了${totalHours}小时了？比要求的还多... 这... 这有点太多了吧？姥爷说... 说工作太多会变傻的... 也许你应该请假休息一下？我... 我可不想看到你被姥爷惩罚...`
                };
                totalHoursDisplay.className = 'bg-rick-pink/20 text-rick-pink';
            }
            
            // 更新弹窗内容
            characterName.textContent = character.name;
            characterImage.src = character.image;
            characterImage.alt = character.name;
            characterQuote.textContent = character.quote;
            employeeName.textContent = employeeNameText;
            totalHoursDisplay.textContent = `总工时: ${totalHours}小时`;
            
            // 显示弹窗
            characterModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // 防止背景滚动
        }

        // 关闭弹窗
        function closeCharacterModal() {
            characterModal.classList.add('hidden');
            document.body.style.overflow = ''; // 恢复滚动
        }

        // 初始化统计数据
        function initStats() {
            totalEmployeesEl.textContent = employees.length;
            
            const 达标员工数 = employees.filter(emp => emp.total === 168).length;
            达标员工数El.textContent = 达标员工数;
            
            const 异常员工数 = employees.length - 达标员工数;
            异常员工数El.textContent = 异常员工数;
        }

        // 初始化图表
        function initChart() {
            const ctx = document.getElementById('workHoursChart').getContext('2d');
            
            // 统计工时分布
            const under168 = employees.filter(emp => emp.total < 168).length;
            const exactly168 = employees.filter(emp => emp.total === 168).length;
            const over168 = employees.filter(emp => emp.total > 168).length;
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['工时不足', '工时正常', '已加班'],
                    datasets: [{
                        data: [under168, exactly168, over168],
                        backgroundColor: [
                            'rgba(255, 69, 100, 0.7)',  // 红色
                            'rgba(57, 255, 20, 0.7)',   // 绿色
                            'rgba(255, 110, 199, 0.7)'  // 粉色
                        ],
                        borderColor: [
                            'rgba(255, 69, 100, 1)',
                            'rgba(57, 255, 20, 1)',
                            'rgba(255, 110, 199, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'white',
                                font: {
                                    size: 12
                                },
                                padding: 20
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(26, 31, 41, 0.9)',
                            titleColor: '#00FFFF',
                            bodyColor: 'white',
                            borderColor: '#00FFFF',
                            borderWidth: 1,
                            padding: 12,
                            displayColors: true
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true,
                        duration: 2000,
                        easing: 'easeOutQuart'
                    },
                    cutout: '65%'
                }
            });
        }

        // 搜索功能
        function handleSearch(input) {
            const searchTerm = input.value.toLowerCase().trim();
            
            if (searchTerm === '') {
                renderEmployees();
                return;
            }
            
            const filteredEmployees = employees.filter(emp => 
                emp.name.toLowerCase().includes(searchTerm) ||
                emp.total.toString().includes(searchTerm) ||
                emp.hours.some(hour => hour.toString().includes(searchTerm))
            );
            
            renderEmployees(filteredEmployees);
        }

        // 滚动动画
        function handleScrollAnimations() {
            const elements = document.querySelectorAll('.animate-on-scroll');
            
            elements.forEach(element => {
                const elementPosition = element.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                
                if (elementPosition < windowHeight * 0.85) {
                    element.classList.add('visible');
                }
            });
        }

        // 事件监听
        closeModal.addEventListener('click', closeCharacterModal);
        
        // 点击弹窗背景关闭弹窗
        characterModal.addEventListener('click', (e) => {
            if (e.target === characterModal) {
                closeCharacterModal();
            }
        });
        
        // 搜索事件
        globalSearch.addEventListener('input', (e) => handleSearch(e.target));
        mobileSearch.addEventListener('input', (e) => handleSearch(e.target));
        
        // 滚动事件
        window.addEventListener('scroll', handleScrollAnimations);
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            initStars();
            renderEmployees();
            initStats();
            initChart();
            handleScrollAnimations(); // 初始检查可见元素
        });
    </script>
</body>
</html>
